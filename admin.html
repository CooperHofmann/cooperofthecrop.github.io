<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | COOPEROFTHECROP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --black: #000000;
            --white: #FAF9F6;
            --accent: #FF462E;
            --gray: #808080;
            --light-gray: #E0E0E0;
            --success: #00AA00;
            --warning: #FF9900;
            --danger: #CC0000;
            --blue: #0066CC;
        }
        
        body {
            font-family: Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--black);
            line-height: 1.4;
            min-height: 100vh;
        }

        /* PIN Authentication Modal */
        .pin-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .pin-modal.hidden {
            display: none;
        }

        .pin-content {
            background: var(--white);
            border: 4px solid var(--black);
            padding: 60px 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .pin-content h2 {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 36px;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 20px;
            letter-spacing: -0.02em;
        }

        .pin-content p {
            color: var(--gray);
            margin-bottom: 30px;
            font-size: 16px;
        }

        .pin-input-wrapper {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .pin-digit {
            width: 60px;
            height: 80px;
            border: 4px solid var(--black);
            font-family: Helvetica, Arial, sans-serif;
            font-size: 36px;
            font-weight: 700;
            text-align: center;
            background: var(--light-gray);
            transition: all 0.2s ease;
        }

        .pin-digit:focus {
            outline: none;
            border-color: var(--blue);
            background: var(--white);
        }

        .pin-error {
            color: var(--danger);
            font-weight: 600;
            margin-top: 10px;
            display: none;
        }

        .pin-error.show {
            display: block;
        }

        /* Admin Container */
        .admin-container {
            display: none;
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .admin-container.active {
            display: block;
        }

        /* Header */
        .admin-header {
            background: var(--white);
            border: 4px solid var(--black);
            padding: 30px 40px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .admin-header h1 {
            font-family: Helvetica, Arial, sans-serif;
            font-size: clamp(28px, 5vw, 48px);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: -0.02em;
        }

        .admin-header .actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--white);
            border: 4px solid var(--black);
            padding: 30px;
            text-align: center;
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card .number {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 48px;
            font-weight: 700;
            color: var(--blue);
            margin-bottom: 10px;
        }

        .stat-card .label {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--gray);
            font-weight: 600;
        }

        /* Main Content Area */
        .admin-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }

        /* Sidebar */
        .admin-sidebar {
            background: var(--white);
            border: 4px solid var(--black);
            padding: 0;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            border-bottom: 3px solid var(--black);
        }

        .sidebar-menu li:last-child {
            border-bottom: none;
        }

        .sidebar-menu a {
            display: block;
            padding: 20px 25px;
            text-decoration: none;
            color: var(--black);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 14px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: var(--black);
            color: var(--white);
        }

        /* Panel Sections */
        .panel-section {
            display: none;
            background: var(--white);
            border: 4px solid var(--black);
            padding: 40px;
        }

        .panel-section.active {
            display: block;
        }

        .panel-section h2 {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 32px;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 30px;
            border-bottom: 4px solid var(--black);
            padding-bottom: 15px;
        }

        /* Upload Zone */
        .upload-zone {
            border: 4px dashed var(--gray);
            padding: 60px 20px;
            text-align: center;
            background: var(--light-gray);
            margin-bottom: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-zone:hover,
        .upload-zone.dragover {
            border-color: var(--blue);
            background: rgba(0, 102, 204, 0.1);
        }

        .upload-zone .icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .upload-zone h3 {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .upload-zone p {
            color: var(--gray);
            font-size: 14px;
        }

        #fileInput {
            display: none;
        }

        /* Category Selector */
        .category-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .category-btn {
            background: var(--light-gray);
            border: 3px solid var(--black);
            padding: 20px;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .category-btn:hover,
        .category-btn.active {
            background: var(--black);
            color: var(--white);
        }

        /* Photo Grid */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .photo-item {
            position: relative;
            border: 4px solid var(--black);
            overflow: hidden;
            aspect-ratio: 1;
            background: var(--light-gray);
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .photo-item .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .photo-item:hover .overlay {
            opacity: 1;
        }

        .photo-item .overlay button {
            padding: 10px 15px;
            border: 2px solid var(--white);
            background: transparent;
            color: var(--white);
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .photo-item .overlay button:hover {
            background: var(--white);
            color: var(--black);
        }

        /* Buttons */
        .btn {
            background: var(--black);
            color: var(--white);
            border: 3px solid var(--black);
            padding: 12px 24px;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 14px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            background: var(--white);
            color: var(--black);
        }

        .btn-success {
            background: var(--success);
            border-color: var(--success);
        }

        .btn-success:hover {
            background: var(--white);
            color: var(--success);
        }

        .btn-danger {
            background: var(--danger);
            border-color: var(--danger);
        }

        .btn-danger:hover {
            background: var(--white);
            color: var(--danger);
        }

        .btn-blue {
            background: var(--blue);
            border-color: var(--blue);
        }

        .btn-blue:hover {
            background: var(--white);
            color: var(--blue);
        }

        /* Config Editor */
        .config-editor {
            margin-top: 30px;
        }

        .config-editor textarea {
            width: 100%;
            min-height: 400px;
            background: var(--light-gray);
            border: 3px solid var(--black);
            padding: 20px;
            font-family: Helvetica, Arial, sans-serif;
            font-size: 14px;
            resize: vertical;
            line-height: 1.6;
        }

        .config-editor textarea:focus {
            outline: none;
            border-color: var(--blue);
        }

        /* Instructions Box */
        .instructions-box {
            background: rgba(255, 153, 0, 0.2);
            border: 3px solid var(--warning);
            padding: 25px;
            margin-bottom: 30px;
        }

        .instructions-box h3 {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .instructions-box ol {
            margin-left: 20px;
            line-height: 1.8;
        }

        .instructions-box code {
            background: var(--white);
            padding: 2px 6px;
            border: 1px solid var(--black);
            font-family: Helvetica, Arial, sans-serif;
            font-size: 12px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: var(--white);
            border: 3px solid var(--black);
            padding: 20px 30px;
            font-weight: 600;
            z-index: 9999;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--danger);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .admin-content {
                grid-template-columns: 1fr;
            }

            .admin-sidebar {
                position: static;
            }

            .sidebar-menu {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .sidebar-menu li {
                border-right: 3px solid var(--black);
                border-bottom: none;
            }

            .sidebar-menu li:last-child {
                border-right: none;
            }
        }

        @media (max-width: 768px) {
            .pin-digit {
                width: 50px;
                height: 70px;
                font-size: 28px;
            }

            .admin-header {
                text-align: center;
            }

            .photo-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- PIN Authentication Modal -->
    <div id="pinModal" class="pin-modal">
        <div class="pin-content">
            <h2>üîí ADMIN ACCESS</h2>
            <p>Enter your PIN to access the admin panel</p>
            <div class="pin-input-wrapper">
                <input type="password" maxlength="1" class="pin-digit" id="pin1" autofocus>
                <input type="password" maxlength="1" class="pin-digit" id="pin2">
                <input type="password" maxlength="1" class="pin-digit" id="pin3">
                <input type="password" maxlength="1" class="pin-digit" id="pin4">
            </div>
            <div class="pin-error" id="pinError">‚ùå Incorrect PIN. Please try again.</div>
        </div>
    </div>

    <!-- Admin Container -->
    <div id="adminContainer" class="admin-container">
        <!-- Header -->
        <div class="admin-header">
            <h1>üì∏ ADMIN DASHBOARD</h1>
            <div class="actions">
                <a href="index.html" class="btn">üè† View Site</a>
                <button class="btn btn-danger" onclick="logout()">üö™ Logout</button>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="number" id="statTrack">0</div>
                <div class="label">Track Photos</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statSoccer">0</div>
                <div class="label">Soccer Photos</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statFootball">0</div>
                <div class="label">Football Photos</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statBasketball">0</div>
                <div class="label">Basketball Photos</div>
            </div>
            <div class="stat-card">
                <div class="number" id="statBestOf">0</div>
                <div class="label">Best Of Photos</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="admin-content">
            <!-- Sidebar -->
            <aside class="admin-sidebar">
                <ul class="sidebar-menu">
                    <li><a onclick="showPanel('overview', event)" class="active">üìä Overview</a></li>
                    <li><a onclick="showPanel('upload', event)">‚¨ÜÔ∏è Upload Photos</a></li>
                    <li><a onclick="showPanel('manage', event)">üñºÔ∏è Manage Photos</a></li>
                    <li><a onclick="showPanel('config', event)">‚öôÔ∏è Configuration</a></li>
                    <li><a onclick="showPanel('help', event)">‚ùì Help</a></li>
                </ul>
            </aside>

            <!-- Panels -->
            <main class="admin-main">
                <!-- Overview Panel -->
                <section id="panelOverview" class="panel-section active">
                    <h2>Welcome to Your Admin Panel</h2>
                    
                    <div class="instructions-box">
                        <h3>üéâ New: Easy Photo Deployment!</h3>
                        <ol>
                            <li>Upload photos using the <strong>Upload Photos</strong> panel</li>
                            <li>Organize and preview your photos in the <strong>Manage Photos</strong> panel</li>
                            <li>Go to <strong>Configuration</strong> panel and click <strong>"Download Photos Package"</strong></li>
                            <li>Extract the ZIP file and copy the folders to your repository</li>
                            <li>Commit and push to GitHub - No code editing required!</li>
                        </ol>
                        <p style="margin-top: 15px; padding: 15px; background: rgba(0, 170, 0, 0.1); border: 2px solid var(--success);">
                            <strong>üí° Tip:</strong> The Photos Package includes everything ready to deploy - just extract, copy, and push!
                        </p>
                    </div>

                    <h3 style="font-family: Helvetica, Arial, sans-serif; font-size: 20px; margin: 30px 0 20px;">Quick Actions</h3>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="btn btn-blue" onclick="showPanel('upload')">‚¨ÜÔ∏è Upload New Photos</button>
                        <button class="btn" onclick="showPanel('manage')">üñºÔ∏è Browse Galleries</button>
                        <button class="btn btn-success" onclick="showPanel('config')">üì¶ Download Photos Package</button>
                    </div>

                    <h3 style="font-family: Helvetica, Arial, sans-serif; font-size: 20px; margin: 30px 0 20px;">Recent Activity</h3>
                    <div id="recentActivity" style="background: var(--light-gray); padding: 20px; border: 3px solid var(--black);">
                        <p style="color: var(--gray);">No recent activity. Start by uploading some photos!</p>
                    </div>
                </section>

                <!-- Upload Panel -->
                <section id="panelUpload" class="panel-section">
                    <h2>Upload Photos</h2>
                    
                    <div class="instructions-box">
                        <h3>üì§ How to Upload</h3>
                        <ol>
                            <li>Select a category below</li>
                            <li>Click the upload zone or drag & drop your photos</li>
                            <li>Photos will be stored locally for preview</li>
                            <li>Go to Configuration panel to get the code for deployment</li>
                        </ol>
                    </div>

                    <h3 style="font-family: Helvetica, Arial, sans-serif; margin-bottom: 15px;">Select Category</h3>
                    <div class="category-selector">
                        <button class="category-btn active" data-category="track" onclick="selectCategory('track', event)">üì∏ TRACK</button>
                        <button class="category-btn" data-category="soccer" onclick="selectCategory('soccer', event)">‚öΩ SOCCER</button>
                        <button class="category-btn" data-category="football" onclick="selectCategory('football', event)">üèà FOOTBALL</button>
                        <button class="category-btn" data-category="basketball" onclick="selectCategory('basketball', event)">üèÄ BASKETBALL</button>
                        <button class="category-btn" data-category="bestOf" onclick="selectCategory('bestOf', event)">‚≠ê BEST OF</button>
                    </div>

                    <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()">
                        <div class="icon">üìÅ</div>
                        <h3>Click to Upload or Drag & Drop</h3>
                        <p>Supports: JPG, JPEG, PNG, GIF</p>
                    </div>
                    <input type="file" id="fileInput" multiple accept="image/*">

                    <div id="previewGrid" class="photo-grid"></div>
                </section>

                <!-- Manage Panel -->
                <section id="panelManage" class="panel-section">
                    <h2>Manage Photos</h2>
                    
                    <h3 style="font-family: Helvetica, Arial, sans-serif; margin-bottom: 15px;">Select Gallery</h3>
                    <div class="category-selector">
                        <button class="category-btn active" data-gallery="track" onclick="showGallery('track')">üì∏ TRACK</button>
                        <button class="category-btn" data-gallery="soccer" onclick="showGallery('soccer')">‚öΩ SOCCER</button>
                        <button class="category-btn" data-gallery="football" onclick="showGallery('football')">üèà FOOTBALL</button>
                        <button class="category-btn" data-gallery="basketball" onclick="showGallery('basketball')">üèÄ BASKETBALL</button>
                        <button class="category-btn" data-gallery="bestOf" onclick="showGallery('bestOf')">‚≠ê BEST OF</button>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <button class="btn btn-blue" onclick="downloadAllCategoryPhotos()">üíæ Download All Photos in This Category</button>
                        <p style="margin-top: 10px; color: var(--gray); font-size: 14px;">
                            Download all photos from the currently selected category. You can also download individual photos by hovering over them.
                        </p>
                    </div>

                    <div id="galleryGrid" class="photo-grid"></div>
                </section>

                <!-- Config Panel -->
                <section id="panelConfig" class="panel-section">
                    <h2>Configuration</h2>
                    
                    <div class="instructions-box">
                        <h3>üìù Deployment Instructions</h3>
                        <ol>
                            <li>Copy the configuration code below</li>
                            <li>Open <code>js/config.js</code> in your code editor</li>
                            <li>Replace the entire content with this code</li>
                            <li>Save the file</li>
                            <li>Commit and push to GitHub: <code>git add . && git commit -m "Update photos" && git push</code></li>
                            <li>Wait 1-2 minutes for GitHub Pages to deploy</li>
                        </ol>
                    </div>

                    <div class="config-editor">
                        <label style="font-family: Helvetica, Arial, sans-serif; font-weight: 700; display: block; margin-bottom: 10px;">
                            CONFIGURATION CODE (Copy this to js/config.js)
                        </label>
                        <textarea id="configCode" readonly></textarea>
                    </div>

                    <div style="margin-top: 20px;">
                        <button class="btn btn-success" onclick="copyConfig()">üìã Copy to Clipboard</button>
                        <button class="btn" onclick="downloadConfig()">üíæ Download Config File</button>
                        <button class="btn btn-blue" onclick="downloadPhotosPackage()">üì¶ Download Photos Package</button>
                    </div>
                    
                    <div class="instructions-box" style="margin-top: 30px;">
                        <h3>üì¶ Download Photos Package</h3>
                        <p style="margin-bottom: 10px;">Click "Download Photos Package" to get a ZIP file containing:</p>
                        <ul style="margin-left: 20px; line-height: 1.8;">
                            <li>All photos organized in their category folders (track, soccer, football, basketball, best-of)</li>
                            <li>Updated <code>config.js</code> file</li>
                            <li>README with deployment instructions</li>
                        </ul>
                        <p style="margin-top: 15px;"><strong>To deploy:</strong> Extract the ZIP, copy files to your repository, commit and push!</p>
                    </div>
                </section>

                <!-- Help Panel -->
                <section id="panelHelp" class="panel-section">
                    <h2>Help & Documentation</h2>
                    
                    <div style="margin-bottom: 30px;">
                        <h3 style="font-family: Helvetica, Arial, sans-serif; font-size: 20px; margin-bottom: 15px;">üìñ Getting Started</h3>
                        <p style="line-height: 1.8; margin-bottom: 15px;">
                            This admin panel allows you to manage your photography portfolio locally. You can upload photos, organize them into categories, and generate the configuration code needed to deploy your changes to the live website.
                        </p>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h3 style="font-family: Helvetica, Arial, sans-serif; font-size: 20px; margin-bottom: 15px;">üîí Security</h3>
                        <p style="line-height: 1.8; margin-bottom: 15px;">
                            Your PIN is stored locally in your browser. Default PIN is <code style="background: var(--light-gray); padding: 3px 8px; border: 1px solid var(--black);">1234</code>. To change it, update the <code style="background: var(--light-gray); padding: 3px 8px; border: 1px solid var(--black);">ADMIN_PIN</code> variable in the admin.html file.
                        </p>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h3 style="font-family: Helvetica, Arial, sans-serif; font-size: 20px; margin-bottom: 15px;">üíæ Data Storage</h3>
                        <p style="line-height: 1.8; margin-bottom: 15px;">
                            Photos are stored in your browser's localStorage as base64 encoded data. This means:
                        </p>
                        <ul style="margin-left: 30px; line-height: 1.8;">
                            <li>Photos persist across page reloads</li>
                            <li>Photos are only visible on this browser</li>
                            <li>Storage is limited (usually 5-10MB)</li>
                            <li>Clearing browser data will delete your uploads</li>
                        </ul>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h3 style="font-family: Helvetica, Arial, sans-serif; font-size: 20px; margin-bottom: 15px;">üöÄ Publishing Changes</h3>
                        <p style="line-height: 1.8; margin-bottom: 15px;">
                            <strong>NEW: Easy one-click deployment!</strong>
                        </p>
                        <ol style="margin-left: 30px; line-height: 1.8;">
                            <li>Go to the Configuration panel</li>
                            <li>Click <strong>"Download Photos Package"</strong> button</li>
                            <li>Extract the downloaded ZIP file</li>
                            <li>Copy the <code style="background: var(--light-gray); padding: 3px 8px; border: 1px solid var(--black);">images/</code> and <code style="background: var(--light-gray); padding: 3px 8px; border: 1px solid var(--black);">js/</code> folders to your repository (replace when prompted)</li>
                            <li>Commit and push to GitHub: <code style="background: var(--light-gray); padding: 3px 8px; border: 1px solid var(--black);">git add . && git commit -m "Update photos" && git push</code></li>
                            <li>Wait 1-2 minutes for GitHub Pages to deploy</li>
                        </ol>
                        <p style="margin-top: 15px; padding: 15px; background: rgba(0, 170, 0, 0.1); border: 2px solid var(--success);">
                            <strong>üí° New Feature:</strong> The Photos Package includes all your photos AND the updated config file. No manual code editing required!
                        </p>
                    </div>

                    <div style="background: var(--light-gray); padding: 25px; border: 3px solid var(--black);">
                        <h3 style="font-family: Helvetica, Arial, sans-serif; font-size: 20px; margin-bottom: 15px;">üìß Need Help?</h3>
                        <p style="line-height: 1.8;">
                            For technical support or questions, refer to the README.md file in the repository or contact your web developer.
                        </p>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- JSZip for creating ZIP files (loaded from CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" crossorigin="anonymous"></script>
    <!-- Fallback notice will be shown in the downloadPhotosPackage function if JSZip fails to load -->
    
    <script src="js/config.js"></script>
    <script>
        // Admin PIN (change this to your desired PIN)
        // ‚ö†Ô∏è IMPORTANT SECURITY WARNING:
        // This is CLIENT-SIDE authentication only and provides basic access control.
        // Anyone with access to the source code can see or bypass this PIN.
        // The default PIN '1234' MUST be changed before deploying to production.
        // For production use with sensitive data, implement server-side authentication.
        const ADMIN_PIN = '1234';
        
        // Image compression settings
        const IMAGE_MAX_WIDTH = 2000;  // Maximum width for uploaded images
        const IMAGE_QUALITY = 0.85;     // JPEG quality (0-1, where 1 is highest quality)
        const BASE64_OVERHEAD = 0.75;   // Base64 encoding efficiency factor (actual data is ~75% of encoded string)
        
        // Current selected category for upload
        let currentCategory = 'track';
        let currentGallery = 'track';

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            initPinAuth();
            loadPhotosFromStorage();
            updateStats();
        });

        // PIN Authentication
        function initPinAuth() {
            const pinInputs = document.querySelectorAll('.pin-digit');
            
            pinInputs.forEach((input, index) => {
                input.addEventListener('input', (e) => {
                    if (e.target.value.length === 1 && index < pinInputs.length - 1) {
                        pinInputs[index + 1].focus();
                    }
                    
                    // Check if all digits are filled
                    if (index === pinInputs.length - 1 && e.target.value.length === 1) {
                        checkPin();
                    }
                });

                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && e.target.value === '' && index > 0) {
                        pinInputs[index - 1].focus();
                    }
                });
            });
        }

        function checkPin() {
            const pinInputs = document.querySelectorAll('.pin-digit');
            const enteredPin = Array.from(pinInputs).map(input => input.value).join('');
            
            if (enteredPin === ADMIN_PIN) {
                // Correct PIN
                document.getElementById('pinModal').classList.add('hidden');
                document.getElementById('adminContainer').classList.add('active');
                showNotification('‚úì Access granted! Welcome to the admin panel.', 'success');
            } else {
                // Wrong PIN
                document.getElementById('pinError').classList.add('show');
                pinInputs.forEach(input => {
                    input.value = '';
                    input.style.borderColor = 'var(--danger)';
                });
                pinInputs[0].focus();
                
                setTimeout(() => {
                    document.getElementById('pinError').classList.remove('show');
                    pinInputs.forEach(input => {
                        input.style.borderColor = 'var(--black)';
                    });
                }, 2000);
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                document.getElementById('adminContainer').classList.remove('active');
                document.getElementById('pinModal').classList.remove('hidden');
                // Clear PIN inputs
                document.querySelectorAll('.pin-digit').forEach(input => {
                    input.value = '';
                });
                document.getElementById('pin1').focus();
            }
        }

        // Panel Navigation
        function showPanel(panelName, clickEvent) {
            // Hide all panels
            document.querySelectorAll('.panel-section').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Show selected panel
            document.getElementById('panel' + panelName.charAt(0).toUpperCase() + panelName.slice(1)).classList.add('active');
            
            // Update sidebar active state
            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.classList.remove('active');
            });
            if (clickEvent && clickEvent.target) {
                clickEvent.target.classList.add('active');
            }

            // Refresh data for specific panels
            if (panelName === 'manage') {
                showGallery(currentGallery);
            } else if (panelName === 'config') {
                generateConfig();
            }
        }

        // Category Selection
        function selectCategory(category, clickEvent) {
            currentCategory = category;
            document.querySelectorAll('.category-btn[data-category]').forEach(btn => {
                btn.classList.remove('active');
            });
            if (clickEvent && clickEvent.target) {
                clickEvent.target.classList.add('active');
            }
        }

        // File Upload
        document.getElementById('fileInput').addEventListener('change', handleFileSelect);
        
        const uploadZone = document.getElementById('uploadZone');
        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });
        
        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });
        
        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            handleFileSelect({ target: { files: e.dataTransfer.files } });
        });

        // Image Compression Function
        async function compressImage(file, maxWidth = IMAGE_MAX_WIDTH, quality = IMAGE_QUALITY) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        // Create canvas for compression
                        const canvas = document.createElement('canvas');
                        let width = img.width;
                        let height = img.height;
                        
                        // Scale down if image is too large
                        if (width > maxWidth) {
                            height = (height * maxWidth) / width;
                            width = maxWidth;
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        const ctx = canvas.getContext('2d');
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // Convert to JPEG with specified quality
                        canvas.toBlob((blob) => {
                            if (!blob) {
                                reject(new Error('Failed to create blob from canvas'));
                                return;
                            }
                            const compressedReader = new FileReader();
                            compressedReader.onload = (event) => {
                                resolve(event.target.result);
                            };
                            compressedReader.onerror = reject;
                            compressedReader.readAsDataURL(blob);
                        }, 'image/jpeg', quality);
                    };
                    img.onerror = reject;
                    img.src = e.target.result;
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        async function handleFileSelect(e) {
            const files = Array.from(e.target.files);
            
            for (const file of files) {
                if (!file.type.match('image.*')) {
                    showNotification('‚ùå Please upload only image files', 'error');
                    continue;
                }

                try {
                    // Compress the image before saving
                    const compressedDataUrl = await compressImage(file, IMAGE_MAX_WIDTH, IMAGE_QUALITY);
                    
                    // Calculate compression ratio
                    const originalSize = file.size / 1024; // Original size in KB
                    // Remove data URL prefix to get just the Base64 data
                    const base64Data = compressedDataUrl.split(',')[1];
                    // Base64 encoding: each character represents 6 bits but takes 8 bits to store
                    // So actual binary data size = base64Length * 0.75
                    const compressedSize = (base64Data.length * BASE64_OVERHEAD / 1024);
                    const compressionRatio = Math.max(0, Math.round((1 - compressedSize / originalSize) * 100));
                    
                    savePhoto(currentCategory, file.name, compressedDataUrl);
                    
                    if (compressionRatio > 0) {
                        showNotification(`‚úì ${file.name} compressed (${compressionRatio}% smaller) and uploaded to ${currentCategory}!`, 'success');
                    } else {
                        showNotification(`‚úì ${file.name} uploaded to ${currentCategory}!`, 'success');
                    }
                    updateStats();
                } catch (error) {
                    console.error('Compression error:', error);
                    showNotification(`‚ùå Failed to compress ${file.name}`, 'error');
                }
            }

            // Clear input
            e.target.value = '';
        }

        // Photo Storage (localStorage)
        function savePhoto(category, filename, dataUrl) {
            const photos = JSON.parse(localStorage.getItem('adminPhotos') || '{}');
            if (!photos[category]) {
                photos[category] = [];
            }
            
            // Check if photo already exists
            const existingIndex = photos[category].findIndex(p => p.filename === filename);
            if (existingIndex >= 0) {
                photos[category][existingIndex] = { filename, dataUrl, timestamp: Date.now() };
            } else {
                photos[category].push({ filename, dataUrl, timestamp: Date.now() });
            }
            
            localStorage.setItem('adminPhotos', JSON.stringify(photos));
        }

        function loadPhotosFromStorage() {
            // Initialize if not exists
            if (!localStorage.getItem('adminPhotos')) {
                localStorage.setItem('adminPhotos', JSON.stringify({}));
            }
        }

        function getPhotos(category) {
            const photos = JSON.parse(localStorage.getItem('adminPhotos') || '{}');
            return photos[category] || [];
        }

        function deletePhoto(category, filename) {
            if (!confirm(`Delete ${filename} from ${category}?`)) return;
            
            const photos = JSON.parse(localStorage.getItem('adminPhotos') || '{}');
            if (photos[category]) {
                photos[category] = photos[category].filter(p => p.filename !== filename);
                localStorage.setItem('adminPhotos', JSON.stringify(photos));
                showGallery(category);
                updateStats();
                showNotification(`‚úì ${filename} deleted`, 'success');
            }
        }

        // Gallery Management
        function showGallery(gallery) {
            currentGallery = gallery;
            
            // Update button states
            document.querySelectorAll('.category-btn[data-gallery]').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.gallery === gallery) {
                    btn.classList.add('active');
                }
            });

            const photos = getPhotos(gallery);
            const galleryGrid = document.getElementById('galleryGrid');
            
            if (photos.length === 0) {
                galleryGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 60px; color: var(--gray);"><h3 style="font-family: Helvetica, Arial, sans-serif; font-size: 20px; margin-bottom: 10px;">No photos in this gallery yet</h3><p>Go to Upload panel to add photos</p></div>';
                return;
            }

            // Helper function to escape HTML
            const escapeHtml = (str) => {
                const div = document.createElement('div');
                div.textContent = str;
                return div.innerHTML;
            };

            galleryGrid.innerHTML = photos.map(photo => {
                const safeFilename = escapeHtml(photo.filename);
                const safeGallery = escapeHtml(gallery);
                // Create a unique ID for each photo to use in onclick
                const photoId = `photo_${safeGallery}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                return `
                <div class="photo-item">
                    <img src="${photo.dataUrl}" alt="${safeFilename}" id="${photoId}">
                    <div class="overlay">
                        <button onclick="downloadPhoto('${photoId}', '${safeFilename}')">üíæ Download</button>
                        <button onclick="deletePhoto('${safeGallery}', '${safeFilename}')">üóëÔ∏è Delete</button>
                    </div>
                </div>
            `;
            }).join('');
        }

        // Download individual photo
        function downloadPhoto(photoId, filename) {
            const img = document.getElementById(photoId);
            if (!img) {
                showNotification('‚ùå Photo not found', 'error');
                return;
            }
            const dataUrl = img.src;
            const a = document.createElement('a');
            a.href = dataUrl;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            showNotification(`‚úì ${filename} downloaded!`, 'success');
        }

        // Download all photos from current category
        function downloadAllCategoryPhotos() {
            const photos = getPhotos(currentGallery);
            if (photos.length === 0) {
                showNotification('‚ùå No photos in this category to download.', 'error');
                return;
            }

            showNotification(`üì• Downloading ${photos.length} photo${photos.length !== 1 ? 's' : ''}...`, 'success');
            
            // Download each photo with a slight delay to avoid browser blocking
            photos.forEach((photo, index) => {
                setTimeout(() => {
                    const a = document.createElement('a');
                    a.href = photo.dataUrl;
                    a.download = photo.filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    if (index === photos.length - 1) {
                        showNotification(`‚úì All ${photos.length} photo${photos.length !== 1 ? 's' : ''} downloaded!`, 'success');
                    }
                }, index * 200); // 200ms delay between downloads
            });
        }

        // Stats Update
        function updateStats() {
            const photos = JSON.parse(localStorage.getItem('adminPhotos') || '{}');
            
            document.getElementById('statTrack').textContent = (photos.track || []).length;
            document.getElementById('statSoccer').textContent = (photos.soccer || []).length;
            document.getElementById('statFootball').textContent = (photos.football || []).length;
            document.getElementById('statBasketball').textContent = (photos.basketball || []).length;
            document.getElementById('statBestOf').textContent = (photos.bestOf || []).length;
        }

        // Configuration Generator
        function generateConfig() {
            const photos = JSON.parse(localStorage.getItem('adminPhotos') || '{}');
            
            const configCode = `/**
 * IMAGE CONFIGURATION
 * 
 * This file controls which images appear in each portfolio section.
 * Generated by Admin Panel on ${new Date().toLocaleString()}
 */

const portfolioConfig = {
    track: {
        title: "TRACK &<br>FIELD",
        description: "Track & Field Photography",
        images: [
${(photos.track || []).map(p => `            "${p.filename}",`).join('\n')}
        ]
    },
    soccer: {
        title: "SOCCER",
        description: "Soccer Photography",
        images: [
${(photos.soccer || []).map(p => `            "${p.filename}",`).join('\n')}
        ]
    },
    football: {
        title: "FOOTBALL",
        description: "Football Photography",
        images: [
${(photos.football || []).map(p => `            "${p.filename}",`).join('\n')}
        ]
    },
    basketball: {
        title: "BASKETBALL",
        description: "Basketball Photography",
        images: [
${(photos.basketball || []).map(p => `            "${p.filename}",`).join('\n')}
        ]
    },
    bestOf: {
        title: "BEST<br>OF",
        description: "Curated Selection",
        images: [
${(photos.bestOf || []).map(p => `            "${p.filename}",`).join('\n')}
        ]
    }
};

// Placeholder images for empty galleries
const placeholderImages = [
    "https://images.unsplash.com/photo-1461896836934-ffe607ba8211?w=800&q=80",
    "https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=800&q=80",
    "https://images.unsplash.com/photo-1566577134770-3d85bb3a9cc4?w=800&q=80",
    "https://images.unsplash.com/photo-1546519638-68e109498ffc?w=800&q=80",
];`;

            document.getElementById('configCode').value = configCode;
        }

        function copyConfig() {
            const configCode = document.getElementById('configCode').value;
            navigator.clipboard.writeText(configCode).then(() => {
                showNotification('‚úì Configuration copied to clipboard!', 'success');
            }).catch(err => {
                // Fallback for older browsers
                const textarea = document.getElementById('configCode');
                textarea.select();
                try {
                    document.execCommand('copy');
                    showNotification('‚úì Configuration copied to clipboard!', 'success');
                } catch (e) {
                    showNotification('‚ùå Failed to copy. Please copy manually.', 'error');
                }
            });
        }

        function downloadConfig() {
            const configCode = document.getElementById('configCode').value;
            const blob = new Blob([configCode], { type: 'text/javascript' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'config.js';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showNotification('‚úì Configuration downloaded!', 'success');
        }

        // Download Photos Package as ZIP
        async function downloadPhotosPackage() {
            const photos = JSON.parse(localStorage.getItem('adminPhotos') || '{}');
            
            // Check if there are any photos
            const totalPhotos = Object.values(photos).reduce((sum, arr) => sum + arr.length, 0);
            if (totalPhotos === 0) {
                showNotification('‚ùå No photos to download. Please upload some photos first.', 'error');
                return;
            }

            // Check if JSZip is available
            if (typeof JSZip === 'undefined') {
                // Fallback: Download files individually
                const proceed = confirm('JSZip library is not available. Would you like to download the config file and instructions instead?\n\n(Note: You will need to save photos manually from the Manage Photos section)');
                if (proceed) {
                    downloadConfig();
                    downloadDeploymentInstructions();
                    showNotification('‚ö†Ô∏è Config downloaded. Please save photos manually from Manage Photos section.', 'error');
                }
                return;
            }

            showNotification('üì¶ Creating package... This may take a moment.', 'success');

            try {
                const zip = new JSZip();
                
                // Add photos to appropriate folders
                const categories = {
                    track: 'track',
                    soccer: 'soccer',
                    football: 'football',
                    basketball: 'basketball',
                    bestOf: 'best-of'
                };

                for (const [category, folderName] of Object.entries(categories)) {
                    const categoryPhotos = photos[category] || [];
                    if (categoryPhotos.length > 0) {
                        const folder = zip.folder(`images/${folderName}`);
                        for (const photo of categoryPhotos) {
                            // Convert base64 to blob
                            const base64Data = photo.dataUrl.split(',')[1];
                            folder.file(photo.filename, base64Data, {base64: true});
                        }
                    }
                }

                // Add config.js file
                const configCode = document.getElementById('configCode').value;
                zip.folder('js').file('config.js', configCode);

                // Add README with instructions
                const readme = `# Photo Package - Ready to Deploy

## What's in this package?

This ZIP file contains:
- All your photos organized in the images/ folders
- Updated config.js file
- This README with deployment instructions

## How to deploy these changes:

### Option 1: Quick Deploy (Recommended)
1. Extract this ZIP file
2. Copy the \`images/\` and \`js/\` folders to your repository
3. When prompted, choose to replace/merge existing folders
4. Open terminal/command prompt in your repository folder
5. Run these commands:
   \`\`\`
   git add .
   git commit -m "Update portfolio photos"
   git push
   \`\`\`
6. Wait 1-2 minutes for GitHub Pages to deploy
7. Visit your site to see the changes!

### Option 2: Manual Verification
1. Extract this ZIP file
2. Copy each image file to its corresponding folder in your repo:
   - images/track/ ‚Üí Track photos
   - images/soccer/ ‚Üí Soccer photos
   - images/football/ ‚Üí Football photos
   - images/basketball/ ‚Üí Basketball photos
   - images/best-of/ ‚Üí Best Of photos
3. Replace js/config.js with the new config.js file
4. Verify files are in the correct locations
5. Commit and push:
   \`\`\`
   git add .
   git commit -m "Update portfolio photos"
   git push
   \`\`\`

## Photo Summary

Generated on: ${new Date().toLocaleString()}

${Object.entries(categories).map(([category, folderName]) => {
    const count = (photos[category] || []).length;
    return `- ${folderName}: ${count} photo${count !== 1 ? 's' : ''}`;
}).join('\n')}

Total: ${totalPhotos} photo${totalPhotos !== 1 ? 's' : ''}

## Need Help?

If you encounter any issues:
1. Make sure you're in your repository folder
2. Check that Git is installed (\`git --version\`)
3. Verify you have access to push to the repository
4. See ADMIN_GUIDE.md in your repository for more details

---

Generated by Cooper of the Crop Admin Panel
`;
                
                zip.file('README-DEPLOYMENT.txt', readme);

                // Generate ZIP file
                const content = await zip.generateAsync({
                    type: 'blob',
                    compression: 'DEFLATE',
                    compressionOptions: { level: 6 }
                });

                // Download the ZIP file
                const url = URL.createObjectURL(content);
                const a = document.createElement('a');
                a.href = url;
                a.download = `portfolio-photos-${new Date().toISOString().split('T')[0]}.zip`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                showNotification(`‚úì Package downloaded! Contains ${totalPhotos} photo${totalPhotos !== 1 ? 's' : ''}.`, 'success');
            } catch (error) {
                console.error('Error creating ZIP:', error);
                showNotification('‚ùå Failed to create package. Try downloading config and photos separately.', 'error');
            }
        }

        // Download deployment instructions as a fallback
        function downloadDeploymentInstructions() {
            const photos = JSON.parse(localStorage.getItem('adminPhotos') || '{}');
            const totalPhotos = Object.values(photos).reduce((sum, arr) => sum + arr.length, 0);
            
            const categories = {
                track: 'track',
                soccer: 'soccer',
                football: 'football',
                basketball: 'basketball',
                bestOf: 'best-of'
            };

            const instructions = `# Photo Deployment Instructions

## Overview
You have ${totalPhotos} photo${totalPhotos !== 1 ? 's' : ''} ready to deploy to your portfolio.

## Photo Summary
${Object.entries(categories).map(([category, folderName]) => {
    const count = (photos[category] || []).length;
    return `- ${folderName}: ${count} photo${count !== 1 ? 's' : ''}`;
}).join('\n')}

## Deployment Steps

### Step 1: Save Photos
1. Go to the "Manage Photos" section in the admin panel
2. For each category with photos:
   - Click on the category tab
   - Right-click each photo and select "Save Image As..."
   - Save to a folder on your computer (organize by category)

### Step 2: Copy Photos to Repository
1. Open your repository folder on your computer
2. Navigate to the images/ folder
3. Copy your saved photos to the appropriate subfolders:
   - Track photos ‚Üí images/track/
   - Soccer photos ‚Üí images/soccer/
   - Football photos ‚Üí images/football/
   - Basketball photos ‚Üí images/basketball/
   - Best Of photos ‚Üí images/best-of/

### Step 3: Update Configuration
The config.js file has already been downloaded separately.
1. Replace your repository's js/config.js with the downloaded file

### Step 4: Deploy to GitHub
1. Open terminal/command prompt in your repository folder
2. Run these commands:
   \`\`\`
   git add .
   git commit -m "Update portfolio photos"
   git push
   \`\`\`
3. Wait 1-2 minutes for GitHub Pages to deploy
4. Visit your website to see the changes

## Filenames
Make sure the filenames match exactly (case-sensitive):

${Object.entries(categories).map(([category, folderName]) => {
    const categoryPhotos = photos[category] || [];
    if (categoryPhotos.length === 0) return '';
    return `### ${folderName}:\n${categoryPhotos.map(p => `- ${p.filename}`).join('\n')}`;
}).filter(Boolean).join('\n\n')}

## Need Help?
- Check that filenames match exactly (including extensions)
- Verify photos are in the correct folders
- Make sure you have permission to push to the repository
- See ADMIN_GUIDE.md in your repository for more details

---

Generated by Cooper of the Crop Admin Panel on ${new Date().toLocaleString()}
`;

            const blob = new Blob([instructions], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'DEPLOYMENT-INSTRUCTIONS.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Notification System
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification';
            if (type === 'error') {
                notification.classList.add('error');
            }
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>
